---
title: "Empirical Analysis"
author: "Young Geun Kim"
date: "`r format(Sys.time(), '%d %b, %Y')`"
output: 
  bookdown::html_document2:
    toc: true
knit:
  (function(inputFile, encoding) {
    rmarkdown::render(
      input = inputFile,
      output_dir = "../output", 
      encoding = encoding
    )
  })
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  out.width = "70%",
  fig.align = "center",
  fig.width = 6,
  fig.asp = .618,
  fig.pos = "H"
)
knitr::knit_hooks$set(
  document = function(x) {
    sub("\\usepackage[]{color}", "\\usepackage{xcolor}", x, fixed = TRUE)
  }
)
options(digits = 3)
```

```{r}
library(tidyverse)
library(bvhar)
```

# Dataset

## Energy Consumption Data

```{r}
est_energy
```

## Plot

```{r}
est_energy %>% 
  mutate(id = 1:n()) %>% 
  pivot_longer(-id, names_to = "region", values_to = "rk") %>% 
  ggplot(aes(x = id, y = rk)) +
  geom_path(aes(colour = region), show.legend = FALSE) +
  theme_minimal()
```

Without `DEOK` (Daytok power and light componay),

```{r}
est_energy %>% 
  mutate(id = 1:n()) %>% 
  select(-DEOK) %>% 
  pivot_longer(-id, names_to = "region", values_to = "rk") %>% 
  ggplot(aes(x = id, y = rk)) +
  geom_path(aes(colour = region), show.legend = FALSE) +
  theme_minimal()
```

## Out-of-sample

```{r}
h <- 22
```

Exclude `DEOK`?

```{r}
est_eval <- 
  est_energy %>% 
  select(-DEOK) %>%
  divide_ts(h)
est_train <- est_eval$train
est_test <- est_eval$test
```

# Models



